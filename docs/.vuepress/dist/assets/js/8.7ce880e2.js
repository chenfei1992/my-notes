(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{356:function(s,t,a){"use strict";a.r(t);var n=a(42),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"asm-jsçš„ç®€ä»‹"}},[s._v("asm.jsçš„ç®€ä»‹")]),s._v(" "),a("h2",{attrs:{id:"_1-1åŸç†"}},[s._v("ğŸ 1.1åŸç†")]),s._v(" "),a("p",[s._v("C / C++ ç¼–è¯‘æˆ JS æœ‰ä¸¤ä¸ªæœ€å¤§çš„å›°éš¾ã€‚")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ul",[a("li",[s._v("C / C++ æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œè€ŒJSæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€")]),s._v(" "),a("li",[s._v("C / C++ æ˜¯æ‰‹åŠ¨å†…å­˜ç®¡ç†ï¼Œè€ŒJSä¾é åƒåœ¾å›æ”¶æœºåˆ¶")])])]),s._v(" "),a("p",[s._v("asm.js å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜è€Œè®¾è®¡çš„ï¼šå®ƒçš„å˜é‡ä¸€å¾‹éƒ½æ˜¯é™æ€ç±»å‹ï¼Œå¹¶ä¸”å–æ¶ˆåƒåœ¾å›æ”¶æœºåˆ¶ã€‚é™¤äº†è¿™äº®ç‚¹ï¼Œå®ƒä¸ JavaScript å¹¶æ— å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œasm.js æ˜¯ JavaScript çš„ä¸€ä¸ªä¸¥æ ¼çš„å­é›†ï¼Œåªèƒ½ä½¿ç”¨åè€…çš„ä¸€éƒ¨åˆ†è¯­æ³•ã€‚\nä¸€æ—¦ JavaScript å¼•æ“å‘ç°è¿è¡Œçš„æ˜¯ asm.jsï¼Œå°±çŸ¥é“è¿™æ˜¯ç»è¿‡ä¼˜åŒ–çš„ä»£ç ï¼Œå¯ä»¥è·³è¿‡è¯­æ³•åˆ†æè¿™ä¸€æ­¥ï¼Œç›´æ¥è½¬æˆæ±‡ç¼–è¯­è¨€ã€‚å¦å¤–ï¼Œæµè§ˆå™¨è¿˜ä¼šè°ƒç”¨ WebGL é€šè¿‡ GPU æ‰§è¡Œ asm.jsï¼Œå³ asm.js çš„æ‰§è¡Œå¼•æ“ä¸æ™®é€šçš„ JavaScript è„šæœ¬ä¸åŒã€‚è¿™äº›éƒ½æ˜¯ asm.js è¿è¡Œè¾ƒå¿«çš„åŸå› ã€‚æ®ç§°ï¼Œasm.js åœ¨æµè§ˆå™¨é‡Œçš„è¿è¡Œé€Ÿåº¦ï¼Œå¤§çº¦æ˜¯åŸç”Ÿä»£ç çš„50%å·¦å³ã€‚")]),s._v(" "),a("h2",{attrs:{id:"_1-2-é™æ€ç±»å‹çš„å˜é‡"}},[s._v("ğŸ 1.2 é™æ€ç±»å‹çš„å˜é‡")]),s._v(" "),a("p",[s._v("asm.js åªæä¾›ä¸¤ç§ç±»å‹")]),s._v(" "),a("ul",[a("li",[s._v("32ä½å¸¦ç¬¦å·æ•´æ•°")]),s._v(" "),a("li",[s._v("64ä½å¸¦ç¬¦å·æµ®ç‚¹æ•°\nå…¶ä»–æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼æˆ–è€…å¯¹è±¡ï¼Œasm.jsä¸€æ¦‚ä¸æä¾›ã€‚å®ƒä»¬éƒ½æ˜¯ä»¥æ•°å€¼çš„å½¢å¼å­˜åœ¨ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé€šè¿‡ "),a("code",[s._v("TypedArray")]),s._v("è°ƒç”¨ã€‚\nå¦‚æœå˜é‡çš„ç±»å‹è¦åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œasm.jsÂ å°±è¦æ±‚äº‹å…ˆå£°æ˜ç±»å‹ï¼Œå¹¶ä¸”ä¸å¾—æ”¹å˜ï¼Œè¿™æ ·å°±èŠ‚çœäº†ç±»å‹åˆ¤æ–­çš„æ—¶é—´ã€‚\nasm.jsçš„ç±»å‹å£°æ˜æœ‰å›ºå®šå†™æ³•ï¼Œ"),a("code",[s._v("å˜é‡|0")]),s._v("è¡¨ç¤ºæ•´æ•°ï¼Œ"),a("code",[s._v("+å˜é‡")]),s._v("è¡¨ç¤ºæµ®ç‚¹æ•°ã€‚")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// x æ˜¯32ä½æ•´æ•°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// y æ˜¯64ä½æµ®ç‚¹æ•°")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xå£°æ˜ä¸ºæ•´æ•°ï¼Œyå£°æ˜ä¸ºæµ®ç‚¹æ•°ã€‚æ”¯æŒasm.jsçš„å¼•æ“ä¸€çœ‹åˆ°x=a | 0ï¼Œå°±çŸ¥é“xæ˜¯æ•´æ•°ï¼Œç„¶åé‡‡ç”¨asm.jsçš„æœºåˆ¶å¤„ç†ã€‚å¦‚æœå¼•æ“ä¸æ”¯æŒasm.jsä¹Ÿæ²¡å…³ç³»ï¼Œè¿™æ®µä»£ç ç…§æ ·å¯ä»¥è¿è¡Œï¼Œæœ€åå¾—åˆ°çš„è¿˜æ˜¯åŒæ ·çš„ç»“æœã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å†™æ³•ä¸€")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" first "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" second "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å†™æ³•äºŒ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" first "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" second "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" first "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œå†™æ³•ä¸€æ˜¯æ™®é€šçš„JavaScript,å˜é‡secondåªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ç±»å‹ï¼Œè¿™æ ·å°±å¾ˆæ…¢äº†ï¼Œå†™æ³•äºŒæ˜¯asm.js,secondåœ¨å£°æ˜æ—¶å°±çŸ¥é“æ˜¯æ•´æ•°ï¼Œé€Ÿåº¦å°±æé«˜äº†ã€‚\nå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œéƒ½è¦ç”¨è¿™ç§æ–¹å¼æŒ‡å®šç±»å‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œé™¤äº†å‚æ•°xå’Œyéœ€è¦å£°æ˜ç±»å‹ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¹Ÿéœ€è¦å£°æ˜ç±»å‹ã€‚")]),s._v(" "),a("h2",{attrs:{id:"_1-3åƒåœ¾å›æ”¶æœºåˆ¶"}},[s._v("ğŸ 1.3åƒåœ¾å›æ”¶æœºåˆ¶")]),s._v(" "),a("p",[s._v("asm.js æ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€æœ‰å†…å­˜æ“ä½œéƒ½ç”±ç¨‹åºå‘˜è‡ªå·±æ§åˆ¶ã€‚asm.jsé€šè¿‡TypedArrayç›´æ¥è¯»å†™å†…å­˜ã€‚ä¸‹é¢å°±æ˜¯ç›´æ¥è¯»å†™å†…å­˜çš„ä¾‹å­ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Int8Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compiledCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ptr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("å¦‚æœæ¶‰åŠåˆ°æŒ‡é’ˆï¼Œä¹Ÿæ˜¯ä¸€æ ·å¤„ç†")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("size_t "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("strlen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("char "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    char "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        curr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢çš„ä»£ç ç¼–è¯‘æˆasm.js,å°±æ˜¯ä¸‹é¢è¿™æ ·")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("strlen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ptr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ptr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MEM8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("curr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("curr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"_1-4-asm-js-ä¸-webassembly-çš„å¼‚åŒ"}},[s._v("ğŸ 1.4 asm.js ä¸ WebAssembly çš„å¼‚åŒ")]),s._v(" "),a("p",[s._v("å¦‚æœä½ å¯¹ JS æ¯”è¾ƒäº†è§£ï¼Œå¯èƒ½çŸ¥é“è¿˜æœ‰ä¸€ç§å«åš WebAssembly çš„æŠ€æœ¯ï¼Œä¹Ÿèƒ½å°† C / C++ è½¬æˆ JS å¼•æ“å¯ä»¥è¿è¡Œçš„ä»£ç ã€‚é‚£ä¹ˆå®ƒä¸ asm.js æœ‰ä½•åŒºåˆ«å‘¢ï¼Ÿ\nå›ç­”æ˜¯ï¼Œä¸¤è€…çš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼Œå°±æ˜¯è½¬å‡ºæ¥çš„ä»£ç ä¸ä¸€æ ·ï¼šasm.js æ˜¯æ–‡æœ¬ï¼ŒWebAssembly æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œå› æ­¤è¿è¡Œé€Ÿåº¦æ›´å¿«ã€ä½“ç§¯æ›´å°ã€‚ä»é•¿è¿œæ¥çœ‹ï¼ŒWebAssembly çš„å‰æ™¯æ›´å…‰æ˜ã€‚\nä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ asm.js è‚¯å®šä¼šè¢«æ·˜æ±°ï¼Œå› ä¸ºå®ƒæœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼šé¦–å…ˆï¼Œå®ƒæ˜¯æ–‡æœ¬ï¼Œäººç±»å¯è¯»ï¼Œæ¯”è¾ƒç›´è§‚ï¼›å…¶æ¬¡ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ asm.jsï¼Œä¸ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚")]),s._v(" "),a("h1",{attrs:{id:"emscripten-ç¼–è¯‘å™¨"}},[s._v("Emscripten ç¼–è¯‘å™¨")]),s._v(" "),a("h2",{attrs:{id:"_2-1-emscripten-ç®€ä»‹"}},[s._v("ğŸ 2.1 Emscripten ç®€ä»‹")]),s._v(" "),a("p",[s._v("è™½ç„¶ asm.js å¯ä»¥æ‰‹å†™ï¼Œä½†æ˜¯å®ƒä»æ¥å°±æ˜¯ç¼–è¯‘å™¨çš„ç›®æ ‡è¯­è¨€ï¼Œè¦é€šè¿‡ç¼–è¯‘äº§ç”Ÿã€‚ç›®å‰ï¼Œç”Ÿæˆ asm.js çš„ä¸»è¦å·¥å…·æ˜¯ Emscriptenã€‚\nEmscriptençš„åº•å±‚æ˜¯LLVMç¼–è¯‘å™¨ï¼Œç†è®ºä¸Šä»»ä½•å¯ä»¥ç”ŸæˆLLVM IRï¼ˆIntermediate Representationï¼‰çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥ç¼–è¯‘æˆasm.jsã€‚ ä½†æ˜¯å®é™…ä¸Šï¼ŒEmscriptenå‡ ä¹åªç”¨äºå°†C/C++ç¼–è¯‘æˆasm.js")]),s._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v("C/C++ => LLVM ==> LLVM IR => Emscripten => asm.js\n")])])]),a("h2",{attrs:{id:"_2-2-emscripten-çš„å®‰è£…"}},[s._v("ğŸ 2.2 Emscripten çš„å®‰è£…")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ git clone https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("juj"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("emsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("git\n$ cd emsdk\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("emsdk install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Release sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("incoming"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("bit binaryen"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("bit\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("emsdk activate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("build"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Release sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("incoming"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("bit binaryen"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("bit\n$ source "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("emsdk_env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n")])])]),a("p",[s._v("æ³¨æ„ï¼Œæœ€åä¸€è¡Œéå¸¸é‡è¦ã€‚æ¯æ¬¡é‡æ–°ç™»é™†æˆ–è€…æ–°å»º Shell çª—å£ï¼Œéƒ½è¦æ‰§è¡Œä¸€æ¬¡è¿™è¡Œå‘½ä»¤source ./emsdk_env.shã€‚")]),s._v(" "),a("h2",{attrs:{id:"_2-3-hello-world"}},[s._v("ğŸ 2.3 Hello World")]),s._v(" "),a("p",[s._v("é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªæœ€ç®€å•çš„C++ç¨‹åºhello.cc")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("iostream"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nint "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    std"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("cout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World!"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("end1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ç„¶åï¼Œå°†è¿™ä¸ªç¨‹åºè½¬æˆasm.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ emcc hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc\n$ node a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nHello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œemccå‘½ä»¤ç”¨äºç¼–è¯‘æºç ï¼Œé»˜è®¤ç”Ÿæˆa.out.jsã€‚ä½¿ç”¨ Node æ‰§è¡Œa.out.jsï¼Œå°±ä¼šåœ¨å‘½ä»¤è¡Œè¾“å‡º Hello Worldã€‚\næ³¨æ„ï¼Œasm.js é»˜è®¤è‡ªåŠ¨æ‰§è¡Œmainå‡½æ•°ã€‚\nemccæ˜¯ Emscripten çš„ç¼–è¯‘å‘½ä»¤ã€‚å®ƒçš„ç”¨æ³•éå¸¸ç®€å•")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("# ç”Ÿæˆ a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n$ emcc hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c\n# ç”Ÿæˆ hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n$ emcc hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n# ç”Ÿæˆ hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html å’Œ hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n$ emcc hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n")])])]),a("h1",{attrs:{id:"emscripten-è¯­æ³•"}},[s._v("Emscripten è¯­æ³•")]),s._v(" "),a("h2",{attrs:{id:"_3-1-c-c-è°ƒç”¨javascript"}},[s._v("ğŸ 3.1 C/C++ è°ƒç”¨JavaScript")]),s._v(" "),a("p",[s._v("æ–°å»ºä¸€ä¸ªæ–‡ä»¶"),a("code",[s._v("example1.cc")]),s._v(",å†™å…¥ä¸‹é¢çš„ä»£ç ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("emscripten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nint "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EM_ASM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("EM_ASMæ˜¯ä¸€ä¸ªå®ï¼Œä¼šè°ƒç”¨åµŒå…¥çš„JavaScriptä»£ç ã€‚æ³¨æ„ï¼ŒJavaScriptä»£ç è¦å†™åœ¨å¤§æ‹¬å·é‡Œé¢ã€‚ç„¶åï¼Œå°†è¿™ä¸ªç¨‹åºç¼–è¯‘æˆasm.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ emcc example1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n")])])]),a("h2",{attrs:{id:"_3-2-c-c-ä¸javascriptçš„é€šä¿¡"}},[s._v("ğŸ 3.2 C/C++ ä¸JavaScriptçš„é€šä¿¡")]),s._v(" "),a("p",[s._v("Emscriptenå…è®¸C/C++ ä»£ç ä¸JavaScripté€šä¿¡\næ–°å»ºä¸€ä¸ªæ–‡ä»¶example2.cc")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("#include"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("emscripten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n#include"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("iostream"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nint "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    int val1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    int val2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EM_ASM_INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("val1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    std"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("cout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"val2 == "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" val2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("end1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼ŒEM_ASM_INTè¡¨ç¤ºJavaScriptä»£ç è¿”å›çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå®ƒçš„å‚æ•°é‡Œé¢çš„$0è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$1è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚EM_ASM_INTçš„å…¶ä»–å‚æ•°ä¼šæŒ‰ç…§é¡ºåºï¼Œä¼ å…¥JavaScriptè¡¨è¾¾å¼ã€‚ç„¶åï¼Œå°†è¿™ä¸ªç¨‹åºç¼–è¯‘æˆasm.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ emcc example2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n")])])]),a("p",[s._v("æµè§ˆå™¨æ‰“å¼€ç½‘é¡µexample2.htmlï¼Œä¼šæ˜¾ç¤ºval2 == 42ã€‚")]),s._v(" "),a("h2",{attrs:{id:"_3-3-em-asm-å®ç³»åˆ—"}},[s._v("ğŸ 3.3 EM_ASM å®ç³»åˆ—")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EM_ASM")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œæ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMASMARGS")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œå¯ä»¥æœ‰ä»»æ„ä¸ªå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMASMINT")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œå¯ä»¥æœ‰ä»»æ„ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMASMDOUBLE")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œå¯ä»¥æœ‰ä»»æ„ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMASMINT_V")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œæ²¡æœ‰å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMASMDOUBLE_V")]),s._v("ï¼šè°ƒç”¨ "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JS")]),s._v(" ä»£ç ï¼Œæ²¡æœ‰å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚\n")])])]),a("p",[s._v("ä¸‹é¢æ˜¯ä¸€ä¸ªEM_ASM_ARGSçš„ä¾‹å­ã€‚æ–°å»ºæ–‡ä»¶example3.ccï¼Œå†™å…¥ä¸‹é¢çš„ä»£ç ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("emscripten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("string "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EM_ASM_ARGS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Pointer_stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("c_str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nint "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello from C++!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¼ å…¥ JS ä»£ç ã€‚ç”±äºæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä½¿ç”¨EM_ASM_ARGSã€‚å¦å¤–ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ C / C++ é‡Œé¢ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œæ‰€ä»¥è¦è°ƒç”¨Pointer_stringify()æ–¹æ³•å°†å­—ç¬¦æ•°ç»„è½¬æˆ JS çš„å­—ç¬¦ä¸²ã€‚")]),s._v(" "),a("p",[s._v("æ¥ç€ï¼Œå°†è¿™ä¸ªç¨‹åºè½¬æˆ asm.jsã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ emcc example3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n")])])]),a("h2",{attrs:{id:"_3-4-javascript-è°ƒç”¨-c-c-ä»£ç "}},[s._v("ğŸ 3.4 JavaScript è°ƒç”¨ C / C++ ä»£ç ")]),s._v(" "),a("p",[s._v("JS ä»£ç ä¹Ÿå¯ä»¥è°ƒç”¨ C / C++ ä»£ç ã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶example4.ccï¼Œå†™å…¥ä¸‹é¢çš„ä»£ç ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("#include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("emscripten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nextern "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  double "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SquareVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("double val")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" val "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nint "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EM_ASM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    SquareVal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SquareVal'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Computing: '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' * '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' = '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SquareVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v('ä¸Šé¢ä»£ç ä¸­ï¼ŒEM_ASMæ‰§è¡Œ JS ä»£ç ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª C è¯­è¨€å‡½æ•°SquareValã€‚è¿™ä¸ªå‡½æ•°å¿…é¡»æ”¾åœ¨extern "C"ä»£ç å—ä¹‹ä¸­å®šä¹‰ï¼Œè€Œä¸” JS ä»£ç è¿˜è¦ç”¨Module.cwrap()æ–¹æ³•å¼•å…¥è¿™ä¸ªå‡½æ•°ã€‚')]),s._v(" "),a("p",[s._v("Module.cwrap()æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œå«ä¹‰å¦‚ä¸‹ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),s._v(" å‡½æ•°çš„åç§°ï¼Œæ”¾åœ¨å¼•å·ä¹‹ä¸­ã€‚\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),s._v(" å‡½æ•°è¿”å›å€¼çš„ç±»å‹ã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œå¯ä»¥æŠŠç±»å‹å†™æˆ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("ã€‚\nå‡½æ•°å‚æ•°ç±»å‹çš„æ•°ç»„ã€‚\n")])])]),a("p",[s._v("é™¤äº†Module.cwrap()ï¼Œè¿˜æœ‰ä¸€ä¸ªModule.ccall()æ–¹æ³•ï¼Œå¯ä»¥åœ¨ JS ä»£ç ä¹‹ä¸­è°ƒç”¨ C å‡½æ•°ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ccall")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'int_sqrt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// C å‡½æ•°çš„åç§°")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿”å›å€¼çš„ç±»å‹")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‚æ•°ç±»å‹çš„æ•°ç»„")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‚æ•°æ•°ç»„")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n$  emcc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXPORTED_FUNCTIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"['_SquareVal', '_main']\"")]),s._v(" example4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n")])])]),a("p",[s._v("æ³¨æ„ï¼Œç¼–è¯‘å‘½ä»¤é‡Œé¢è¦ç”¨-s EXPORTED_FUNCTIONSå‚æ•°ç»™å‡ºè¾“å‡ºçš„å‡½æ•°åæ•°ç»„ï¼Œè€Œä¸”å‡½æ•°åå‰é¢åŠ ä¸‹åˆ’çº¿ã€‚æœ¬ä¾‹åªè¾“å‡ºä¸¤ä¸ª C å‡½æ•°ï¼Œæ‰€ä»¥è¦å†™æˆ['_SquareVal', '_main']ã€‚")]),s._v(" "),a("p",[s._v("æµè§ˆå™¨æ‰“å¼€example4.htmlï¼Œå°±ä¼šçœ‹åˆ°å¼¹å‡ºçš„å¯¹è¯æ¡†é‡Œé¢æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Computing"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("156.25")]),s._v(" \n")])])]),a("h2",{attrs:{id:"_3-5-c-å‡½æ•°è¾“å‡ºä¸º-javascript-æ¨¡å—"}},[s._v("ğŸ 3.5 C å‡½æ•°è¾“å‡ºä¸º JavaScript æ¨¡å—")]),s._v(" "),a("p",[s._v("å¦ä¸€ç§æƒ…å†µæ˜¯è¾“å‡ºCå‡½æ•°ï¼Œä¾›ç½‘é¡µé‡Œé¢çš„JavaScriptè„šæœ¬è°ƒç”¨ã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶example5.cc")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("extern "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  double "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SquareVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("double val")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" val "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v('ä¸Šé¢ä»£ç ä¸­ï¼ŒSquareValæ˜¯ä¸€ä¸ª C å‡½æ•°ï¼Œæ”¾åœ¨extern "C"ä»£ç å—é‡Œé¢ï¼Œå°±å¯ä»¥å¯¹å¤–è¾“å‡ºã€‚\nç„¶åï¼Œç¼–è¯‘è¿™ä¸ªå‡½æ•°ã€‚')]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ emcc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXPORTED_FUNCTIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"['_SquareVal']\"")]),s._v(" example5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o example5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])]),a("p",[s._v("ä¸Šé¢ä»£ç ä¸­ï¼Œ"),a("code",[s._v("-s EXPORTED_FUNCTIONS")]),s._v("å‚æ•°å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä»£ç é‡Œé¢éœ€è¦è¾“å‡ºçš„å‡½æ•°åã€‚å‡½æ•°åå‰é¢è¦åŠ ä¸‹åˆ’çº¿ã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTML")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUBLIC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-//IETF//DTD HTML//EN"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Test File"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text/javascript"')]),s._v(" src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example5.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  SquareVal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SquareVal'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"result == "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SquareVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("h2",{attrs:{id:"_3-6-nodeè°ƒç”¨cå‡½æ•°"}},[s._v("ğŸ 3.6 Nodeè°ƒç”¨Cå‡½æ•°")]),s._v(" "),a("p",[s._v("å¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ˜¯æµè§ˆå™¨ï¼Œè€Œæ˜¯Nodeï¼Œé‚£ä¹ˆè°ƒç”¨Cå‡½æ•°å°±æ›´æ–¹ä¾¿äº†ã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶example.c")]),s._v(" "),a("div",{staticClass:"language-c++ extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#include <stdio.h>\n#include <emscripten.h>\n\nvoid sayHi() {\n  printf(\"Hi!\\n\");\n}\n\nint daysInWeek() {\n  return 7;\n}\n\n$ emcc -s EXPORTED_FUNCTIONS=\"['_sayHi', '_daysInWeek']\" example6.c -o example6.js\n")])])]),a("p",[s._v("æ¥ç€ï¼Œå†™ä¸€ä¸ªNodeè„šæœ¬test.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" em_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./api_example.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nem_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("_sayHi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nem_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ccall")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sayHi"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("em_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("_daysInWeek")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v('ä¸Šé¢ä»£ç ä¸­ï¼ŒNode è„šæœ¬è°ƒç”¨ C å‡½æ•°æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ä¸‹åˆ’çº¿å‡½æ•°åè°ƒç”¨em_module._sayHi()ï¼Œå¦ä¸€ç§ä½¿ç”¨ccallæ–¹æ³•è°ƒç”¨em_module.ccall("sayHi")ã€‚')]),s._v(" "),a("p",[s._v("è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå°±å¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œçš„è¾“å‡ºã€‚")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ node test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nHi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nHi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n")])])]),a("h1",{attrs:{id:"ç”¨é€”"}},[s._v("ç”¨é€”")]),s._v(" "),a("p",[s._v("asm.js ä¸ä»…èƒ½è®©æµè§ˆå™¨è¿è¡Œ 3D æ¸¸æˆï¼Œè¿˜å¯ä»¥è¿è¡Œå„ç§æœåŠ¡å™¨è½¯ä»¶ï¼Œæ¯”å¦‚ Luaã€Ruby å’Œ SQLiteã€‚ è¿™æ„å‘³ç€å¾ˆå¤šå·¥å…·å’Œç®—æ³•ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç°æˆçš„ä»£ç ï¼Œä¸ç”¨é‡æ–°å†™ä¸€éã€‚")]),s._v(" "),a("p",[s._v("å¦å¤–ï¼Œç”±äº asm.js çš„è¿è¡Œé€Ÿåº¦è¾ƒå¿«ï¼Œæ‰€ä»¥ä¸€äº›è®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼ˆæ¯”å¦‚è®¡ç®— Hashï¼‰å¯ä»¥ä½¿ç”¨ C / C++ å®ç°ï¼Œå†åœ¨ JS ä¸­è°ƒç”¨å®ƒä»¬ã€‚")])])}),[],!1,null,null,null);t.default=r.exports}}]);